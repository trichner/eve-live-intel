var EveStaticData=function(){function r(d){function m(n,f){for(var e=0,k=f.regions.length;e<k;++e){var b=f.regions[e];b.id+=f.region_offset;-1!=b.factionID&&(b.factionID+=f.faction_offset);p.regions[b.id]=b;for(var a=0,m=b.systems.length;a<m;++a){var c=b.systems[a];c.region_id=b.id;"undefined"===typeof c.factionID&&(c.factionID=b.factionID);c.id+=f.system_offset;-1!=c.factionID&&(c.factionID+=f.faction_offset);for(var g=0;g<c.links.length;++g)c.links[g]+=f.system_offset;p.systems[c.id]=c}}d()}d3.json(s,
function(d,f){for(var e=0,k=f.factions.length;e<k;++e){var b=f.factions[e];b.id+=f.faction_offset;p.factions[b.id]=b}d3.json(q,m)})}var s="data/factions.json",q="data/region_KS.json",p={factions:[],regions:[],systems:[]};return{getSystemByID:function(d){return p.systems[d]},getRegionByID:function(d){return p.regions[d]},getFactionByID:function(d){return p.factions[d]},init:function(d){r(d)},getSystemsWithin:function(d,m){var n=[],f=[],e=[];e[d]=n.length;var k=[d];n.push({system:p.systems[d],jumps:0});
for(var b=[1],a=0;a<m;++a){b.push(0);for(var t=[],c=0;c<k.length;++c)for(var g=p.systems[k[c]].links,l=0;l<g.length;++l)"undefined"===typeof e[g[l]]&&(t.push(g[l]),e[g[l]]=n.length,n.push({system:p.systems[g[l]],jumps:a+1}),b[a+1]++);k=t}for(var k=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,c=0,s=n.length;c<s;++c){var h=n[c].system;h.x<k&&(k=h.x);h.x>a&&(a=h.x);h.y<t&&(t=h.y);h.y>g&&(g=h.y);for(var l=0,u=h.links.length;l<u;++l)if("undefined"!==
typeof e[h.links[l]]){var r=e[h.id],q=e[h.links[l]];r<q&&f.push({source:r,target:q})}}return{max_jumps:m,max_x:a,min_x:k,max_y:g,min_y:t,nodes:n,links:f,nodes_per_jumps:b}}}}(),EveLiveData=function(){function r(a){a=a.split(/[- :]/);return new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5])}function s(){clearTimeout(k);var a=q;null!=b.tracker1Elem&&(a+="&t1="+b.tracker1Elem.value);null!=b.tracker2Elem&&(a+="&t2="+b.tracker2Elem.value);null!=b.tracker3Elem&&(a+="&t3="+b.tracker3Elem.value);null!=m&&(a+="&last_update="+
m);d3.json(a,function(a,c){if(!0==c.error)console.log("Error:"+c.message);else{var g=0<c.intels.length,l=!1,q=!1,h=!1;m!=c.serverTime&&(m=c.serverTime,n=r(m));d!=c.system_id&&(d=c.system_id,q=l=!0);c.intels.forEach(function(a){f.push(a);"undefined"===typeof e[a.system_id]?(e[a.system_id]=a,a.system_id==d&&(q=!0)):r(e[a.system_id].seen_at)<r(a.seen_at)&&(e[a.system_id]=a,a.system_id==d&&(q=!0))});h=!0;if(l)b.on_local_change(d);if(q)b.on_local_status_change(e[d]);if(g)b.on_new_intel(c.intels);if(h)b.on_tracker_change(c.trackers);
b.on_intel_update();k=setTimeout(s,p)}})}var q="services/intel.php?g=0",p=5E3,d=null,m=null,n=null,f=[],e=[],k=null,b={tracker1Elem:null,tracker2Elem:null,tracker3Elem:null,on_local_change:function(a){console.log("local:"+a)},on_local_status_change:function(a){console.log("local:"+d+" at:"+a.seen_at)},on_new_intel:function(a){console.log(a)},on_tracker_change:function(a){console.log(a)},on_intel_update:function(){},init:function(){s()},get_server_time:function(){return n},get_local_system_id:function(){return d},
get_intel_by_system:function(a){return e[a]},update_local_hostile:function(){var a=new XMLHttpRequest;a.open("GET","services/send_intel.php?status=1",!0);a.onload=s;a.send()},update_local_clear:function(){var a=new XMLHttpRequest;a.open("GET","services/send_intel.php?status=0",!0);a.onload=s;a.send()}};return b}();